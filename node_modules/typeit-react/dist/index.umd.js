var je=Object.defineProperty;var F=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var ye=(c,f,y)=>f in c?je(c,f,{enumerable:!0,configurable:!0,writable:!0,value:y}):c[f]=y,be=(c,f)=>{for(var y in f||(f={}))ge.call(f,y)&&ye(c,y,f[y]);if(F)for(var y of F(f))Se.call(f,y)&&ye(c,y,f[y]);return c};var ve=(c,f)=>{var y={};for(var _ in c)ge.call(c,_)&&f.indexOf(_)<0&&(y[_]=c[_]);if(c!=null&&F)for(var _ of F(c))f.indexOf(_)<0&&Se.call(c,_)&&(y[_]=c[_]);return y};(function(c,f){typeof exports=="object"&&typeof module!="undefined"?module.exports=f(require("react")):typeof define=="function"&&define.amd?define(["react"],f):(c=typeof globalThis!="undefined"?globalThis:c||self,c.TypeIt=f(c.React))})(this,function(c){"use strict";function f(e){if(e&&e.__esModule)return e;var r={__proto__:null,[Symbol.toStringTag]:"Module"};return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}}),r.default=e,Object.freeze(r)}var y=f(c),_=e=>Array.isArray(e),Z=e=>_(e)?e:[e];let _e=function(e){let r=function(u){return g=g.concat(Z(u)),this},n=function(u,S){g[u]=S},i=function(){g=g.map(u=>(delete u.done,u))},a=function(){g=[],r(e)},d=(u=!1)=>g.filter(S=>u||!S.done),b=u=>{g[u].done=!0},g=[];return r(e),{add:r,set:n,reset:i,wipe:a,getItems:d,markDone:b}};var ee=e=>Array.from(e),z=e=>document.createTextNode(e);let Q=e=>([...e.childNodes].forEach(r=>{if(r.nodeValue){[...r.nodeValue].forEach(n=>{r.parentNode.insertBefore(z(n),r)}),r.remove();return}Q(r)}),e);var te=e=>{let r=document.implementation.createHTMLDocument();return r.body.innerHTML=e,Q(r.body)};const re="data-typeit-id",D="ti-cursor",j="START",Te="END",Ee={started:!1,completed:!1,frozen:!1,destroyed:!1},we={breakLines:!0,cursor:!0,cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}};function U(e,r=!1){let n=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:d=>{var b;return((b=d==null?void 0:d.classList)==null?void 0:b.contains(D))?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),i,a=[];for(;i=n.nextNode();)i.originalParent=i.parentNode,a.push(i);return r?a.reverse():a}function Ie(e){return U(te(e))}function ne(e,r=!0){return r?Ie(e):ee(e).map(z)}var R=e=>document.createElement(e),le=(e,r="")=>{let n=R("style");n.id=r,n.appendChild(z(e)),document.head.appendChild(n)};let ie=e=>Number.isInteger(e),k=(e,r=document,n=!1)=>r[`querySelector${n?"All":""}`](e);var q=e=>"value"in e;let se=e=>q(e)?ee(e.value):U(e,!0).filter(r=>!(r.childNodes.length>0)),Ce=(e,r,n=j)=>{let i=new RegExp(Te,"i").test(n),a=e?k(e,r):r,d=U(a,!0),b=d[0],g=d[d.length-1],S=i&&!e?0:se(r).findIndex(N=>N.isSameNode(i?b:g));return i&&S--,S+1};var oe=({el:e,move:r,cursorPos:n,to:i})=>ie(r)?r*-1:Ce(r,e,i)-n,ue=e=>(_(e)||(e=[e/2,e/2]),e),ae=(e,r)=>Math.abs(Math.random()*(e+r-(e-r))+(e-r));let ce=e=>e/2;function Ne(e){let{speed:r,deleteSpeed:n,lifeLike:i}=e;return n=n!==null?n:r/3,i?[ae(r,ce(r)),ae(n,ce(n))]:[r,n]}var Le=e=>(e.forEach(r=>clearTimeout(r)),[]),Pe=()=>Math.random().toString().substring(2,9),Ae=(e,r)=>{new IntersectionObserver((i,a)=>{i.forEach(d=>{d.isIntersecting&&(r(),a.unobserve(e))})},{threshold:1}).observe(e)};let C=e=>typeof e=="function"?e():e,De=e=>(e==null?void 0:e.tagName)==="BODY",Me=(e,r)=>{if(q(e)){e.value=`${e.value}${r.textContent}`;return}r.innerHTML="";let n=De(r.originalParent)?e:r.originalParent||e;n.insertBefore(r,k("."+D,n)||null)},Re=(e,r,n)=>Math.min(Math.max(r+e,0),n.length);var x=(e,r)=>Object.assign({},e,r),V=e=>{if(!e)return;let r=e.parentNode;(r.childNodes.length>1?e:r).remove()},ke=(e,r,n)=>{let i=r[n-1],a=k(`.${D}`,e);e=(i==null?void 0:i.parentNode)||e,e.insertBefore(a,i||null)};function xe(e){return typeof e=="string"?k(e):e}let $e=e=>/<(.+)>(.*?)<\/(.+)>/.test(e.outerHTML),Oe=async(e,r,n)=>new Promise(i=>{let a=async()=>{await e(),i()};n.push(setTimeout(a,r))}),He={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"","margin-left":"-.125em","margin-right":".125em"},Be=(e,r,n)=>{let a=`${`[${re}='${e}']`} .${D}`,d=getComputedStyle(n),b=Object.entries(He).reduce((g,[u,S])=>`${g} ${u}: var(--ti-cursor-${u}, ${S||d[u]});`,"");le(`@keyframes blink-${e} { 0% {opacity: 0} 49% {opacity: 0} 50% {opacity: 1} } ${a} { display: inline; letter-spacing: -1em; ${b} animation: blink-${e} ${r.cursorSpeed/1e3}s infinite; } ${a}.with-delay { animation-delay: 500ms; } ${a}.disabled { animation: none; }`,e)};function Fe(e,r={}){let n=async(t,l,o=!1)=>{w.frozen&&await new Promise(m=>{this.unfreeze=()=>{w.frozen=!1,m()}}),o||await s.beforeStep(this),await Oe(t,l,K),o||await s.afterStep(this)},i=()=>q(p),a=t=>Ne(s)[t],d=()=>se(p),b=(t,l=0)=>t?a(l):0,g=(t={})=>{let l=t.delay;l&&E.add(()=>A(l))},u=(t,l)=>(E.add(t),g(l),this),S=(t={})=>[()=>H(t),()=>H(s)],N=t=>{let l=s.nextStringDelay;E.add([()=>A(l[0]),...t,()=>A(l[1])])},L=()=>{if(i())return;let t=R("span");return t.className=D,X?(t.innerHTML=te(s.cursorChar).innerHTML,t):(t.style.visibility="hidden",t)},J=async()=>{!i()&&p.appendChild(B),X&&Be(me,s,p)},P=t=>{X&&(B.classList.toggle("disabled",t),B.classList.toggle("with-delay",!t))},Y=()=>{let t=s.strings.filter(l=>!!l);t.forEach((l,o)=>{let m=ne(l,s.html);if(E.add(()=>O({chars:m})),o+1===t.length)return;let h=[s.breakLines?()=>O({chars:[R("BR")],silent:!0}):()=>M({num:m.length})];N(h)})},G=async t=>{I&&await he({value:I}),E.reset(),E.set(0,()=>A(t)),await M({num:null})},$=t=>{let l=p.innerHTML;return l?(p.innerHTML="",s.startDelete?(p.innerHTML=l,Q(p),N([()=>M({num:null})]),t):l.trim().split(/<br(?:\s*?)(?:\/)?>/).concat(t)):t},T=async()=>{w.started=!0;let t=E.getItems();try{for(let o=0;o<t.length;o++)await t[o](),E.markDone(o),P(!1);if(w.completed=!0,await s.afterComplete(this),!s.loop)throw"";let l=s.loopDelay;n(async()=>{await G(l[0]),T()},l[1])}catch{}return this},A=(t=0)=>n(()=>{},t),he=async({value:t,to:l=j,instant:o=!1})=>{P(!0);let m=oe({el:p,move:t,cursorPos:I,to:l}),h=()=>{I=Re(m<0?-1:1,I,d()),ke(p,d(),I)};await n(async()=>{for(let v=0;v<Math.abs(m);v++)o?h():await n(h,a(0))},b(o))},O=({chars:t,silent:l=!1,instant:o=!1})=>(P(!0),n(async()=>{let m=h=>Me(p,h);l||await s.beforeString(t,this);for(let h of t)o||$e(h)?m(h):await n(()=>m(h),a(0));l||await s.afterString(t,this)},b(o),!0)),H=async t=>{s=x(s,t)},Qe=async()=>{if(i()){p.value="";return}d().forEach(t=>{V(t)})},M=async({num:t=null,instant:l=!1,to:o=j})=>{P(!0),await n(async()=>{let m=(()=>t===null?d().length:ie(t)?t:oe({el:p,move:t,cursorPos:I,to:o}))(),h=()=>{let v=d();!v.length||(i()?p.value=p.value.slice(0,-1):V(v[I]))};for(let v=0;v<m;v++)l?h():await n(h,a(1))},b(l,1)),t===null&&d().length-1>0&&await M({num:null})};this.break=function(t){return u(()=>O({chars:[R("BR")],silent:!0}),t)},this.delete=function(t=null,l={}){t=C(t);let o=S(l),m=t,{instant:h,to:v}=l;return u([o[0],()=>M({num:m,instant:h,to:v}),o[1]],l)},this.empty=function(t={}){return u(Qe,t)},this.exec=function(t,l){let o=S(l);return u([o[0],t,o[1]],l)},this.move=function(t,l={}){t=C(t);let o=S(l),{instant:m,to:h}=l,v={value:t===null?"":t,to:h,instant:m};return u([o[0],()=>he(v),o[1]],l)},this.options=function(t){return t=C(t),u(()=>H(t),t)},this.pause=function(t,l={}){return u(()=>A(C(t)),l)},this.type=function(t,l={}){t=C(t);let o=S(l),m=ne(t,s.html),{instant:h}=l,v=[o[0],()=>O({chars:m,instant:h}),o[1]];return u(v,l)},this.is=function(t){return w[t]},this.destroy=function(t=!0){K=Le(K),C(t)&&V(B),w.destroyed=!0},this.freeze=function(){w.frozen=!0},this.unfreeze=function(){},this.reset=function(t){!this.is("destroyed")&&this.destroy(),t?(E.wipe(),t(this)):E.reset(),I=0;for(let l in w)w[l]=!1;return p[i()?"value":"innerHTML"]="",this},this.go=function(){return w.started?this:(J(),s.waitUntilVisible?(Ae(p,T.bind(this)),this):(T(),this))},this.getQueue=()=>E,this.getOptions=()=>s,this.updateOptions=t=>H(t),this.getElement=()=>p;let p=xe(e),K=[],I=0,w=x({},Ee),s=x(we,r);s=x(s,{html:!i()&&s.html,nextStringDelay:ue(s.nextStringDelay),loopDelay:ue(s.loopDelay)});let me=Pe(),E=_e([()=>A(s.startDelay)]);p.dataset.typeitId=me,le(`[${re}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`);let X=s.cursor&&!i(),B=L();s.strings=$(Z(s.strings)),s.strings.length&&Y()}const{useRef:de,useEffect:W,useState:fe}=y,ze={as:"span",options:{},getBeforeInit:e=>e,getAfterInit:e=>e},pe=e=>{const r=de(null),n=de(null),$=e,{options:i,as:a,children:d,getBeforeInit:b,getAfterInit:g}=$,u=ve($,["options","as","children","getBeforeInit","getAfterInit"]),[S,N]=fe(!0),[L,J]=fe(null),P=a;function Y(){const T=Object.assign({},i);d&&r.current&&(T.strings=r.current.innerHTML),J(T)}function G(){n.current=new Fe(r.current,L),n.current=b(n.current),n.current.go(),n.current=g(n.current)}return W(()=>{Y(),N(!1)},[i]),W(()=>{var T;!L||((T=n.current)==null?void 0:T.updateOptions(L))||G()},[L]),W(()=>()=>{var T;return(T=n.current)==null?void 0:T.destroy()},[]),y.createElement(P,be({ref:r,children:S?d:null,style:{opacity:S?0:1}},u))};return pe.defaultProps=ze,pe});
